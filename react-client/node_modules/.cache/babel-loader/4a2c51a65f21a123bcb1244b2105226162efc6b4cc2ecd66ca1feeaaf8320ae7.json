{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BIG60309\\\\react-client\\\\src\\\\components\\\\UserEdit.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport './UserEdit.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserEdit() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [user, setUser] = useState({\n    name: '',\n    password: '',\n    // 비밀번호 필드는 유지하되, 수정 불가\n    role: '',\n    birthDate: '',\n    email: ''\n  });\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const token = localStorage.getItem(\"token\"); // ✅ 토큰 포함\n        const response = await axios.get(`http://localhost:8090/api/users/${id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error(\"회원 정보를 불러오는 중 오류 발생:\", error);\n      }\n    };\n    fetchUser();\n  }, [id]);\n  const handleChange = e => {\n    setUser({\n      ...user,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n\n      // 비밀번호는 수정하지 않도록 user 객체에서 제거\n      const {\n        password,\n        ...updatedUser\n      } = user;\n      await axios.put(`http://localhost:8090/api/users/${id}`, updatedUser, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      alert('회원 정보가 수정되었습니다.');\n      const searchParams = new URLSearchParams(location.search);\n      const category = searchParams.get('category');\n      navigate(`/admin?category=${category}`); // ✅ 수정 후 원래 카테고리로 돌아가기\n    } catch (error) {\n      console.error('Error updating user:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"user-form\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD68C\\uC6D0 \\uC218\\uC815\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\uC774\\uB984:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: user.name,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\uBE44\\uBC00\\uBC88\\uD638:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        value: user.password,\n        onChange: handleChange,\n        disabled: true,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\uC5ED\\uD560:\", /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"role\",\n        value: user.role,\n        onChange: handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"STUDENT\",\n          children: \"\\uD559\\uC0DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"PROFESSOR\",\n          children: \"\\uAD50\\uC218\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\uC0DD\\uB144\\uC6D4\\uC77C:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"birthDate\",\n        value: user.birthDate,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\uC774\\uBA54\\uC77C:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        value: user.email,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"\\uC218\\uC815\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(UserEdit, \"KjRa+muJdg87+a11qfFLHpaJCaw=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = UserEdit;\nexport default UserEdit;\nvar _c;\n$RefreshReg$(_c, \"UserEdit\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","useLocation","jsxDEV","_jsxDEV","UserEdit","_s","id","navigate","location","user","setUser","name","password","role","birthDate","email","fetchUser","token","localStorage","getItem","response","get","headers","Authorization","data","error","console","handleChange","e","target","value","handleSubmit","preventDefault","updatedUser","put","alert","searchParams","URLSearchParams","search","category","className","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","required","disabled","_c","$RefreshReg$"],"sources":["C:/Users/BIG60309/react-client/src/components/UserEdit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport './UserEdit.css';\r\n\r\nfunction UserEdit() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [user, setUser] = useState({\r\n    name: '',\r\n    password: '',  // 비밀번호 필드는 유지하되, 수정 불가\r\n    role: '',\r\n    birthDate: '',\r\n    email: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\"); // ✅ 토큰 포함\r\n        const response = await axios.get(`http://localhost:8090/api/users/${id}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        setUser(response.data);\r\n      } catch (error) {\r\n        console.error(\"회원 정보를 불러오는 중 오류 발생:\", error);\r\n      }\r\n    };\r\n  \r\n    fetchUser();\r\n  }, [id]);\r\n  \r\n\r\n  const handleChange = (e) => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n\r\n\r\n      // 비밀번호는 수정하지 않도록 user 객체에서 제거\r\n      const { password, ...updatedUser } = user;\r\n\r\n      await axios.put(`http://localhost:8090/api/users/${id}`, updatedUser, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      alert('회원 정보가 수정되었습니다.');\r\n      const searchParams = new URLSearchParams(location.search);\r\n      const category = searchParams.get('category');\r\n      navigate(`/admin?category=${category}`); // ✅ 수정 후 원래 카테고리로 돌아가기\r\n    } catch (error) {\r\n      console.error('Error updating user:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"user-form\" onSubmit={handleSubmit}>\r\n      <h2>회원 수정</h2>\r\n      <label>\r\n        이름:\r\n        <input type=\"text\" name=\"name\" value={user.name} onChange={handleChange} required />\r\n      </label>\r\n      <label>\r\n        {/* 비밀번호 입력 필드를 비활성화 */}\r\n        비밀번호:\r\n        <input type=\"password\" name=\"password\" value={user.password} onChange={handleChange} disabled required />\r\n      </label>\r\n      <label>\r\n        역할:\r\n        <select name=\"role\" value={user.role} onChange={handleChange}>\r\n          <option value=\"STUDENT\">학생</option>\r\n          <option value=\"PROFESSOR\">교수</option>\r\n        </select>\r\n      </label>\r\n      <label>\r\n        생년월일:\r\n        <input type=\"date\" name=\"birthDate\" value={user.birthDate} onChange={handleChange} />\r\n      </label>\r\n      <label>\r\n        이메일:\r\n        <input type=\"email\" name=\"email\" value={user.email} onChange={handleChange} />\r\n      </label>\r\n      <button type=\"submit\">수정</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default UserEdit;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}